(self.webpackChunkfishing_study_app=self.webpackChunkfishing_study_app||[]).push([[513],{3513:(t,a,e)=>{"use strict";e.r(a),e.d(a,{ChartModule:()=>_});var i=e(1116),n=e(3337),r=e(1041),o=e(6599),s=e(4689),c=e(5366),h=e(2693),l=e(529),d=e(3080);let b=(()=>{class t{constructor(t){this.http=t,this._baseURL=l.N.baseUrl}getForkLengthIndividuals(t){const a=`${this._baseURL}/biological-data/forklength-individuals`,e=(new h.WM).append("x-token",localStorage.getItem("token")||"").append("nombreCientifico",t);return this.http.get(a,{headers:e})}getScientificCommunName(){const t=`${this._baseURL}/biological-data/common-scientific-name`,a=(new h.WM).append("x-token",localStorage.getItem("token")||"");return this.http.get(t,{headers:a})}getLabelActivityMonth(){const t=`${this._baseURL}/survey/label-activity-month`,a=(new h.WM).append("x-token",localStorage.getItem("token")||"");return this.http.get(t,{headers:a})}getDataActivityMonth(t){const a=`${this._baseURL}/survey/data-activity-month`,e=(new h.WM).append("x-token",localStorage.getItem("token")||"").append("nombreCientifico",t);return this.http.get(a,{headers:e})}getAllDataActivityMonth(t){const a=localStorage.getItem("token")||"",e=[];return t.forEach(t=>{(new h.WM).append("x-token",a).append("nombreCientifico",t.scientificName);const i=this.getDataActivityMonth(t.scientificName);e.push(i)}),(0,d.aj)(e)}getDataActivityYear(t){const a=`${this._baseURL}/survey/data-activity-year`,e=(new h.WM).append("x-token",localStorage.getItem("token")||"").append("nombreCientifico",t);return this.http.get(a,{headers:e})}getAllDataActivityYear(t){const a=[];return t.forEach(t=>{const e=this.getDataActivityYear(t.scientificName);a.push(e)}),(0,d.aj)(a)}}return t.\u0275fac=function(a){return new(a||t)(c.LFG(h.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=e(2797),p=e(3070),g=e(3841),u=e(7064),f=e(4133),v=e(4369),Z=e(7672);function C(t,a){1&t&&c._UZ(0,"mat-spinner",21)}function A(t,a){if(1&t&&(c.TgZ(0,"mat-option",22),c._uU(1),c.qZA()),2&t){const t=a.$implicit;c.Q6J("value",t.scientificName),c.xp6(1),c.AsE(" ",t.scientificName," - ",t.commonName," ")}}function k(t,a){1&t&&c._UZ(0,"mat-spinner",21)}function y(t,a){1&t&&c._UZ(0,"mat-spinner",21)}const D=[{path:"",children:[{path:"biological-data",component:(()=>{class t{constructor(t,a){this.chartService=t,this.fb=a,this.barChartOptions={responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Longitud De Horquilla",fontSize:18,fontColor:"#414042"}}],yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"Individuos capturados",fontSize:18,fontColor:"#414042"}}]},showLines:!0},this.barChartOptions2={responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Fecha",fontSize:18,fontColor:"#414042"}}],yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"Individuos capturados",fontSize:18,fontColor:"#414042"}}]},showLines:!0},this.barChartLabels=[],this.barChartDateLabelsMonth=[],this.barChartDateLabelsYear=[],this.barChartType="bar",this.barChartType2="line",this.barChartType3="bar",this.barChartLegend=!0,this.barChartLegend2=!1,this.barChartLegend3=!1,this.barChartData=[],this.barChartData2=[],this.barChartData3=[],this.miFormulario=this.fb.group({name:["Centropomus undecimalis",[r.kI.required],[]]}),this.commonScientificName=[],this.color=[{background:"#3498dbe6",hoverBackground:"#2980b9"},{background:"#1abc9ce6",hoverBackground:"#16a085"},{background:"#9b58b6e6",hoverBackground:"#8e44ad"},{background:"#e74d3ce6",hoverBackground:"#c0392b"}],this.nameSelected="Centropomus undecimalis",this.spinner1=!0,this.spinner2=!0,this.spinner3=!0}ngOnInit(){var t,a=this.color[Math.floor(4*Math.random()+0)],e=[];this.chartService.getLabelActivityMonth().subscribe(t=>{this.barChartDateLabelsMonth=t.labelDate.map(t=>`${t.month>9?t.month:"0"+t.month}-${t.year}`),this.barChartDateLabelsYear=t.labelDate.map(t=>`${t.year}`);let a=this.barChartDateLabelsYear.filter((t,a)=>this.barChartDateLabelsYear.indexOf(t)===a);this.barChartDateLabelsYear=a}),this.chartService.getScientificCommunName().pipe((0,o.b)(t=>{this.commonScientificName=t.fishNames.map(t=>({commonName:t.commonName,scientificName:t.scientificName}))}),(0,s.w)(()=>this.chartService.getAllDataActivityMonth(this.commonScientificName)),(0,o.b)(t=>{this.barChartData2=[],t.forEach((t,a)=>{var e=0;const i=t.dataActivityMonth,n=t.dataActivityMonth.map(t=>{const a={fecha:`${t.month>9?t.month:"0"+t.month}-${t.year}`,index:e};return e+=1,a}),r={data:[],label:""};r.label=i[0].nombreCientifico;for(let o=0;o<this.barChartDateLabelsMonth.length;o++){const t=n.find(t=>t.fecha==this.barChartDateLabelsMonth[o]);r.data.push(t?i[t.index].cantidad:0)}a>4&&(r.hidden=!0),this.barChartData2.push(r)}),this.spinner2=!1,this.barChartLegend2=!0}),(0,s.w)(()=>this.chartService.getAllDataActivityYear(this.commonScientificName))).subscribe(t=>{console.log(t),this.barChartData3=[],t.forEach((t,a)=>{var e=0;const i=t.dataActivityYear,n=t.dataActivityYear.map(t=>{const a={fecha:`${t.year}`,index:e};return e+=1,a}),r={data:[],label:""};r.label=i[0].nombreCientifico;for(let o=0;o<this.barChartDateLabelsYear.length;o++){const t=n.find(t=>t.fecha==this.barChartDateLabelsYear[o]);r.data.push(t?i[t.index].cantidad:0)}a>4&&(r.hidden=!0),this.barChartData3.push(r)}),this.spinner3=!1,this.barChartLegend3=!0}),this.chartService.getForkLengthIndividuals("Centropomus undecimalis").subscribe(t=>{this.barChartLabels=t.forkLengthAndIndividuals.map(t=>`${t.length}`),e=t.forkLengthAndIndividuals.map(t=>t.currentTotal),this.barChartData=[{data:e,label:this.nameSelected,backgroundColor:a.background,hoverBackgroundColor:a.hoverBackground,borderColor:a.background}],this.spinner1=!1}),null===(t=this.miFormulario.get("name"))||void 0===t||t.valueChanges.pipe((0,o.b)(t=>{this.nameSelected=t,this.spinner1=!0}),(0,s.w)(t=>this.chartService.getForkLengthIndividuals(t))).subscribe(t=>{a=this.color[Math.floor(4*Math.random()+0)],this.barChartLabels=t.forkLengthAndIndividuals.map(t=>`${t.length}`),e=t.forkLengthAndIndividuals.map(t=>t.currentTotal),this.barChartData=[{data:e,label:this.nameSelected,backgroundColor:a.background,hoverBackgroundColor:a.hoverBackground,borderColor:a.background}],this.spinner1=!1})}showAllData(t){"year"==t?this.barChartData3=this.barChartData3.map(t=>(t.hidden=!1,t)):"month"===t&&(this.barChartData2=this.barChartData2.map(t=>(t.hidden=!1,t)))}hiddenAllData(t){"year"==t?this.barChartData3=this.barChartData3.map(t=>(t.hidden=!0,t)):"month"===t&&(this.barChartData2=this.barChartData2.map(t=>(t.hidden=!0,t)))}}return t.\u0275fac=function(a){return new(a||t)(c.Y36(b),c.Y36(r.qu))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-biological-data"]],decls:62,vars:21,consts:[[1,"backgroud","animate__animated","animate__fadeIn"],[1,"mx-5","mt-3","animate__animated","animate__fadeIn",2,"background-color","#fafafa"],[1,"container","mt-2"],[1,"row"],[1,"col-6"],[2,"color","#414042"],[1,"col-6","align-self-end","justify-content-end","float-end",2,"text-align","end"],["color","accent","diameter","50","class","float-end mb-3",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"me-2",2,"color","#414042","margin","0","padding","0"],["appearance","fill",2,"width","100%",3,"formGroup"],["formControlName","name"],["value","Centropomus undecimalis"],[3,"value",4,"ngFor","ngForOf"],[2,"color","#414042","text-align","center"],[1,"px-3","pb-2",2,"display","block"],["baseChart","",3,"datasets","labels","options","legend","chartType"],[1,"mx-5","mt-4"],[1,"row","justify-content-end"],["mat-raised-button","","color","accent",1,"me-3",2,"width","150px",3,"click"],["mat-stroked-button","","color","accent",2,"width","150px",3,"click"],["color","accent","diameter","50",1,"float-end","mb-3"],[3,"value"]],template:function(t,a){1&t&&(c._UZ(0,"div",0),c.TgZ(1,"mat-card",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"h1",5),c._uU(6,"Datos Biologicos"),c.qZA(),c.TgZ(7,"span"),c._uU(8,"Extrancion de informacion reciente de la base de datos"),c.qZA(),c.qZA(),c.TgZ(9,"div",6),c.YNc(10,C,1,0,"mat-spinner",7),c.qZA(),c.qZA(),c._UZ(11,"hr"),c.TgZ(12,"div",8),c.TgZ(13,"h4",9),c._uU(14,"Monitorio: "),c.qZA(),c.TgZ(15,"mat-form-field",10),c.TgZ(16,"mat-label"),c._uU(17,"Seleccione el nombre del pez"),c.qZA(),c.TgZ(18,"mat-select",11),c.TgZ(19,"mat-option",12),c._uU(20,"Centropomus undecimalis"),c.qZA(),c.YNc(21,A,2,3,"mat-option",13),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"h2",14),c._uU(23),c.qZA(),c.TgZ(24,"div",15),c._UZ(25,"canvas",16),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"mat-card",17),c.TgZ(27,"div",2),c.TgZ(28,"div",3),c.TgZ(29,"div",4),c.TgZ(30,"h1",5),c._uU(31,"Recolecci\xf3n por mes"),c.qZA(),c.TgZ(32,"span"),c._uU(33,"Extrancion de la actividad por mes"),c.qZA(),c.qZA(),c.TgZ(34,"div",6),c.YNc(35,k,1,0,"mat-spinner",7),c.qZA(),c.qZA(),c._UZ(36,"hr"),c.TgZ(37,"div",15),c._UZ(38,"canvas",16),c.qZA(),c.TgZ(39,"div",18),c.TgZ(40,"button",19),c.NdJ("click",function(){return a.showAllData("month")}),c._uU(41,"Mostrar"),c.qZA(),c.TgZ(42,"button",20),c.NdJ("click",function(){return a.hiddenAllData("month")}),c._uU(43,"Ocultar"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"mat-card",17),c.TgZ(45,"div",2),c.TgZ(46,"div",3),c.TgZ(47,"div",4),c.TgZ(48,"h1",5),c._uU(49,"Recolecci\xf3n por a\xf1o"),c.qZA(),c.TgZ(50,"span"),c._uU(51,"Extrancion de la actividad por a\xf1o"),c.qZA(),c.qZA(),c.TgZ(52,"div",6),c.YNc(53,y,1,0,"mat-spinner",7),c.qZA(),c.qZA(),c._UZ(54,"hr"),c.TgZ(55,"div",15),c._UZ(56,"canvas",16),c.qZA(),c.TgZ(57,"div",18),c.TgZ(58,"button",19),c.NdJ("click",function(){return a.showAllData("year")}),c._uU(59,"Mostrar"),c.qZA(),c.TgZ(60,"button",20),c.NdJ("click",function(){return a.hiddenAllData("year")}),c._uU(61,"Ocultar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(10),c.Q6J("ngIf",a.spinner1),c.xp6(5),c.Q6J("formGroup",a.miFormulario),c.xp6(6),c.Q6J("ngForOf",a.commonScientificName),c.xp6(2),c.hij("Estructura de talla ",a.nameSelected,""),c.xp6(2),c.Q6J("datasets",a.barChartData)("labels",a.barChartLabels)("options",a.barChartOptions)("legend",a.barChartLegend)("chartType",a.barChartType),c.xp6(10),c.Q6J("ngIf",a.spinner2),c.xp6(3),c.Q6J("datasets",a.barChartData2)("labels",a.barChartDateLabelsMonth)("options",a.barChartOptions2)("legend",a.barChartLegend2)("chartType",a.barChartType2),c.xp6(15),c.Q6J("ngIf",a.spinner3),c.xp6(3),c.Q6J("datasets",a.barChartData3)("labels",a.barChartDateLabelsYear)("options",a.barChartOptions2)("legend",a.barChartLegend3)("chartType",a.barChartType3))},directives:[m.a8,i.O5,p.KE,r.JL,r.sg,p.hX,g.gD,r.JJ,r.u,u.ey,i.sg,f.jh,v.lW,Z.$g],styles:[".backgroud[_ngcontent-%COMP%]{width:100%;position:absolute;top:56px;bottom:0;min-height:100vh;background-image:url(91.f8346b94317d2dd4ba45.png);background-repeat:no-repeat;background-position:50%;background-attachment:fixed;background-size:cover}"]}),t})()},{path:"",redirectTo:"biological-data",pathMatch:"full"}]}];let T=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.Bz.forChild(D)],n.Bz]}),t})();var L=e(4886);let _=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,T,L.q,f.m9,r.UX]]}),t})()}}]);