(self.webpackChunkfishing_study_app=self.webpackChunkfishing_study_app||[]).push([[446],{1446:(t,e,i)=>{"use strict";i.r(e),i.d(e,{EditProfileModule:()=>y});var a=i(1116),r=i(3337),o=i(1041),s=i(6599),n=i(4689),u=i(529),c=i(5366),d=i(1990),l=i(5842),m=i(4369),p=i(7672);function g(t,e){1&t&&(c.TgZ(0,"div",17),c.TgZ(1,"div",18),c._UZ(2,"mat-spinner",19),c.qZA(),c.qZA())}let h=(()=>{class t{constructor(t,e,i,a,r){this.fb=t,this.userService=e,this.authService=i,this.activatedRoute=a,this.router=r,this.usuarioActual=this.authService.user,this.user={uid:"",name:"",email:"",role:"",state:!0,img:""},this._baseUrl=u.N.baseUrl,this.imageUrl="",this.editForm=this.fb.group({name:["",[o.kI.required],[]],email:["",[o.kI.required,o.kI.email],[]],role:["",[o.kI.required],[]],state:["",[o.kI.required],[]]}),this.editPassword=this.fb.group({oldPassword:["",[o.kI.required],[]],newPassword:["",[o.kI.required,o.kI.pattern(this.authService.passwordRegex)],[]],confirmPassword:["",[o.kI.required],[this.authService.samePassword]]}),this.cargando=!0}ngOnInit(){this.activatedRoute.params.pipe((0,s.b)(()=>this.cargando=!0),(0,n.w)(t=>(this.uid=t.uid,this.userService.getUsers(t.uid)))).subscribe(t=>{var e,i;this.prueba=t,this.user=this.prueba.usuario,this.editForm.patchValue({name:this.prueba.usuario.name,email:this.prueba.usuario.email}),null===(e=this.editForm.get("role"))||void 0===e||e.patchValue(this.prueba.usuario.role),null===(i=this.editForm.get("state"))||void 0===i||i.patchValue(this.prueba.usuario.state),this.imageUrl=this.getImageUrl(this.user),this.cargando=!1})}getImageUrl(t){return t.img?`${this._baseUrl}/upload/usuarios/${t.img}`:`${this._baseUrl}/upload/usuarios/no-image`}mostrar(t){"G"===t?this.router.navigateByUrl(`home-page/edit-profile/${this.uid}/edit-profile/${this.uid}`):"P"===t&&this.router.navigateByUrl(`home-page/edit-profile/${this.uid}/update-password/${this.uid}`)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.qu),c.Y36(d.K),c.Y36(l.e),c.Y36(r.gz),c.Y36(r.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-edit-profile"]],decls:26,vars:1,consts:[[1,"prueba","px-5","pt-3",2,"color","#414042"],[2,"margin","0"],["height","10","width","300"],["x1","0","y1","0","x2","150","y2","0"],[1,"row"],[1,"col-3"],["mat-button","",1,"my-2","btn-opt",3,"click"],["src","../../../../assets/profile/usuarioA.png","alt","",1,"imgIcon"],["mat-button","",1,"mb-2","btn-opt",3,"click"],["src","../../../../assets/profile/contrasenaA.png","alt","",1,"imgIcon"],["mat-button","",1,"mb-2","btn-opt"],["src","../../../../assets/profile/infoA.png","alt","",1,"imgIcon"],["src","../../../../assets/profile/participacionA.png","alt","",1,"imgIcon"],["src","../../../../assets/profile/campana-de-notificacionA.png","alt","",1,"imgIcon"],[1,"col-9"],[1,"p-4","container"],["class","prueba2 animate__animated animate__fadeIn",4,"ngIf"],[1,"prueba2","animate__animated","animate__fadeIn"],[1,"centrarSpinner"],["color","accent"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1",1),c._uU(2,"Ajustes de cuenta"),c.qZA(),c.O4$(),c.TgZ(3,"svg",2),c._UZ(4,"line",3),c.qZA(),c.kcU(),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"button",6),c.NdJ("click",function(){return e.mostrar("G")}),c._UZ(8,"img",7),c._uU(9,"General"),c.qZA(),c.TgZ(10,"button",8),c.NdJ("click",function(){return e.mostrar("P")}),c._UZ(11,"img",9),c._uU(12,"Cambiar contrase\xf1a"),c.qZA(),c.TgZ(13,"button",10),c._UZ(14,"img",11),c._uU(15,"Informacion"),c.qZA(),c.TgZ(16,"button",10),c._UZ(17,"img",12),c._uU(18,"Social"),c.qZA(),c.TgZ(19,"button",10),c._UZ(20,"img",13),c._uU(21,"Notificaciones"),c.qZA(),c.qZA(),c.TgZ(22,"div",14),c.TgZ(23,"div",15),c._UZ(24,"router-outlet"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(25,g,3,0,"div",16)),2&t&&(c.xp6(25),c.Q6J("ngIf",e.cargando))},directives:[m.lW,r.lC,a.O5,p.$g],styles:["line[_ngcontent-%COMP%]{stroke:#ff4081;stroke-width:8}.imgIcon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:15px}.prueba[_ngcontent-%COMP%]{position:sticky;top:56px;bottom:0;left:0;right:0;min-height:100vh;background-image:url(90.ea64f17445f9bd7c9ac7.png);background-position:50%;background-repeat:no-repeat;background-size:cover}.btn-opt[_ngcontent-%COMP%]{width:100%;height:48px;text-align:left}.container[_ngcontent-%COMP%]{width:100%;border-radius:10px;background-color:#fafafa;color:#414042}.prueba2[_ngcontent-%COMP%]{position:fixed;top:56px;bottom:0;background-color:#0000004d}.centrarSpinner[_ngcontent-%COMP%], .prueba2[_ngcontent-%COMP%]{width:100%;min-height:100vh}.centrarSpinner[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}"]}),t})();var f=i(2501),Z=i.n(f),b=i(6052),v=i(3070),q=i(9550),_=i(7307),A=i(7436);function U(t,e){if(1&t&&c._UZ(0,"img",18),2&t){const t=c.oxw();c.Q6J("src",t.imageUrl,c.LSH)}}function T(t,e){if(1&t&&c._UZ(0,"img",18),2&t){const t=c.oxw();c.Q6J("src",t.imgTemp,c.LSH)}}function w(t,e){1&t&&(c.TgZ(0,"div",9),c.TgZ(1,"mat-form-field",10),c.TgZ(2,"mat-label"),c._uU(3,"Rol"),c.qZA(),c.TgZ(4,"select",19),c.TgZ(5,"option",20),c._uU(6,"Admin"),c.qZA(),c.TgZ(7,"option",21),c._uU(8,"Cient\xedfico comunitario"),c.qZA(),c.TgZ(9,"option",22),c._uU(10,"Encuestador"),c.qZA(),c.qZA(),c.TgZ(11,"mat-icon",12),c._uU(12,"people"),c.qZA(),c.qZA(),c.qZA())}function x(t,e){1&t&&(c.TgZ(0,"div",9),c.TgZ(1,"mat-icon",23),c._uU(2,"how_to_reg"),c.qZA(),c.TgZ(3,"label",24),c._uU(4,"Estado: "),c.qZA(),c.TgZ(5,"mat-radio-group",25),c.TgZ(6,"mat-radio-button",26),c._uU(7," Activo "),c.qZA(),c.TgZ(8,"mat-radio-button",26),c._uU(9," Inactivo "),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Q6J("value",!0),c.xp6(2),c.Q6J("value",!1))}const I=[{path:"",component:h,children:[{path:"edit-profile/:uid",component:(()=>{class t{constructor(t,e,i,a,r){this.fb=t,this.userService=e,this.authService=i,this.fileUploadService=a,this.activatedRoute=r,this._baseUrl=u.N.baseUrl,this.imageUrl="",this.usuarioActual=this.authService.user,this.user={uid:"",name:"",email:"",role:"",state:!0,img:""},this.editForm=this.fb.group({name:["",[o.kI.required],[]],email:["",[o.kI.required,o.kI.email],[]],role:["",[o.kI.required],[]],state:["",[o.kI.required],[]]})}ngOnInit(){this.activatedRoute.params.pipe((0,n.w)(t=>(this.uid=t.uid,this.userService.getUsers(t.uid)))).subscribe(t=>{var e,i;this.prueba=t,this.user=this.prueba.usuario,this.editForm.patchValue({name:this.prueba.usuario.name,email:this.prueba.usuario.email}),null===(e=this.editForm.get("role"))||void 0===e||e.patchValue(this.prueba.usuario.role),null===(i=this.editForm.get("state"))||void 0===i||i.patchValue(this.prueba.usuario.state),this.imageUrl=this.getImageUrl(this.user)})}updateUser(){this.userService.updateUser(Object.assign({uid:this.uid},this.editForm.value)).subscribe(t=>{!0===t?Z().fire({icon:"success",title:"La informaci\xf3n se actualizo de forma exitosa",showConfirmButton:!1,timer:1500}):Z().fire("Se detecto un error al actualizar")})}changeImage(t){var e;if(this.uploadImage=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.files[0],!this.uploadImage)return;const i=new FileReader;i.readAsDataURL(this.uploadImage),i.onloadend=()=>{this.imgTemp=i.result},this.updateImage()}updateImage(){this.fileUploadService.updateImage(this.uploadImage,"usuarios",this.user.uid).then(t=>{this.user.img=t}).then(t=>this.fileUploadService.setURLImageProfile(this.getImageUrl(this.user)))}getImageUrl(t){return t.img?`${this._baseUrl}/upload/usuarios/${t.img}`:`${this._baseUrl}/upload/usuarios/no-image`}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.qu),c.Y36(d.K),c.Y36(l.e),c.Y36(b.J),c.Y36(r.gz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-account-setting"]],decls:33,vars:7,consts:[[1,"row"],[1,"col-12",2,"display","flex"],["class","imgPerfil","alt","User avatar",3,"src",4,"ngIf"],[1,"header",2,"display","block"],["for","upload-photo",1,"buttonUpdatePhoto"],[1,"fas","fa-upload"],[1,"ms-2"],["id","upload-photo","type","file","accept","image/png, image/jpeg, image/jpg",1,"form-control-file",3,"change"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["matSuffix","",1,"me-2"],["matInput","","formControlName","email"],["matSuffix","",1,""],["class","col-md-6 ",4,"ngIf"],[1,"col-12","d-flex","flex-sm-row","flex-column","mt-2"],["type","submit","mat-stroked-button","","color","accent",3,"disabled"],["alt","User avatar",1,"imgPerfil",3,"src"],["matNativeControl","","formControlName","role"],["value","admin"],["value","biologo"],["value","encuestador"],["matPrefix","",1,"me-2"],["id","state"],["aria-labelledby","state","formControlName","state",1,"radio-group"],["color","accent",1,"radio-button",3,"value"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,U,1,1,"img",2),c.YNc(3,T,1,1,"img",2),c.TgZ(4,"div",3),c.TgZ(5,"h3"),c._uU(6),c.qZA(),c.TgZ(7,"label",4),c._UZ(8,"i",5),c.TgZ(9,"span",6),c._uU(10,"Subir imagen"),c.qZA(),c.qZA(),c.TgZ(11,"input",7),c.NdJ("change",function(t){return e.changeImage(t)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"form",8),c.NdJ("ngSubmit",function(){return e.updateUser()}),c.TgZ(13,"div",0),c.TgZ(14,"div",9),c.TgZ(15,"mat-form-field",10),c.TgZ(16,"mat-label"),c._uU(17,"Nombre de usuario"),c.qZA(),c._UZ(18,"input",11),c.TgZ(19,"mat-icon",12),c._uU(20,"person"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",9),c.TgZ(22,"mat-form-field",10),c.TgZ(23,"mat-label"),c._uU(24,"Email"),c.qZA(),c._UZ(25,"input",13),c.TgZ(26,"mat-icon",14),c._uU(27,"alternate_email"),c.qZA(),c.qZA(),c.qZA(),c.YNc(28,w,13,0,"div",15),c.YNc(29,x,10,2,"div",15),c.TgZ(30,"div",16),c.TgZ(31,"button",17),c._uU(32,"Guardar cambios"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",!e.imgTemp),c.xp6(1),c.Q6J("ngIf",e.imgTemp),c.xp6(3),c.Oqu(e.user.name),c.xp6(6),c.Q6J("formGroup",e.editForm),c.xp6(16),c.Q6J("ngIf","admin"===e.usuarioActual.role),c.xp6(1),c.Q6J("ngIf","admin"===e.usuarioActual.role),c.xp6(2),c.Q6J("disabled",e.editForm.pristine))},directives:[a.O5,o._Y,o.JL,o.sg,v.KE,v.hX,q.Nt,o.Fj,o.JJ,o.u,_.Hw,v.R9,m.lW,o.EJ,o.YN,o.Kr,v.qo,A.VQ,A.U0],styles:[".imgPerfil[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;margin:1rem}.header[_ngcontent-%COMP%]{margin-top:2rem;font-family:Helvetica,Arial,sans-serif}.buttonUpdatePhoto[_ngcontent-%COMP%]{border-radius:5px;padding:0 15px;line-height:34px;color:#ff4081;border:1px solid #0000001f}.buttonUpdatePhoto[_ngcontent-%COMP%]:hover{background-color:#ff408005}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}.radio-group[_ngcontent-%COMP%]{display:flex}.radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})()},{path:"update-password/:uid",component:(()=>{class t{constructor(t,e,i,a){this.fb=t,this.userService=e,this.authService=i,this.activatedRoute=a,this.hide=!0,this.hide2=!0,this.hide3=!0,this.editPassword=this.fb.group({oldPassword:["",[o.kI.required],[]],newPassword:["",[o.kI.required,o.kI.pattern(this.authService.passwordRegex)],[]],confirmPassword:["",[o.kI.required],[this.authService.samePassword]]})}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.uid=t.uid})}updatePassword(){this.userService.updatePassword(Object.assign({uid:this.uid},this.editPassword.value)).subscribe(t=>{!0===t?Z().fire({icon:"success",title:"La contrase\xf1a se actualizo de forma exitosa",showConfirmButton:!1,timer:1500}):Z().fire({icon:"warning",title:"Se detecto un error al actualizar",text:"Verifique su antigua contrase\xf1a y confirme la reci\xe9n ingresada"})}),this.editPassword.reset()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.qu),c.Y36(d.K),c.Y36(l.e),c.Y36(r.gz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-update-password"]],inputs:{uid:"uid"},decls:38,vars:8,consts:[[1,"mb-3"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","oldPassword",3,"type"],["matPrefix","",1,"me-2"],["type","button","mat-icon-button","","matSuffix","",2,"opacity","0.5",3,"click"],["matInput","","formControlName","newPassword",3,"type"],["matInput","","formControlName","confirmPassword",3,"type"],[1,"col-12","d-flex","flex-sm-row","flex-column","mt-2"],["type","submit","mat-stroked-button","","color","accent",3,"disabled"]],template:function(t,e){1&t&&(c.TgZ(0,"h3",0),c._uU(1,"Actualizar contrase\xf1a"),c.qZA(),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return e.updatePassword()}),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"mat-form-field",4),c.TgZ(6,"mat-label"),c._uU(7,"Antigua contrase\xf1a"),c.qZA(),c._UZ(8,"input",5),c.TgZ(9,"mat-icon",6),c._uU(10,"lock"),c.qZA(),c.TgZ(11,"button",7),c.NdJ("click",function(){return e.hide=!e.hide}),c.TgZ(12,"mat-icon"),c._uU(13),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",2),c.TgZ(15,"div",3),c.TgZ(16,"mat-form-field",4),c.TgZ(17,"mat-label"),c._uU(18,"Nueva Contrase\xf1a"),c.qZA(),c._UZ(19,"input",8),c.TgZ(20,"mat-icon",6),c._uU(21,"lock"),c.qZA(),c.TgZ(22,"button",7),c.NdJ("click",function(){return e.hide2=!e.hide2}),c.TgZ(23,"mat-icon"),c._uU(24),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",3),c.TgZ(26,"mat-form-field",4),c.TgZ(27,"mat-label"),c._uU(28,"Confirmar contrase\xf1a"),c.qZA(),c._UZ(29,"input",9),c.TgZ(30,"mat-icon",6),c._uU(31,"lock"),c.qZA(),c.TgZ(32,"button",7),c.NdJ("click",function(){return e.hide3=!e.hide3}),c.TgZ(33,"mat-icon"),c._uU(34),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"div",10),c.TgZ(36,"button",11),c._uU(37,"Guardar cambios"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("formGroup",e.editPassword),c.xp6(6),c.Q6J("type",e.hide?"password":"text"),c.xp6(5),c.Oqu(e.hide?"visibility_off":"visibility"),c.xp6(6),c.Q6J("type",e.hide2?"password":"text"),c.xp6(5),c.Oqu(e.hide2?"visibility_off":"visibility"),c.xp6(5),c.Q6J("type",e.hide3?"password":"text"),c.xp6(5),c.Oqu(e.hide3?"visibility_off":"visibility"),c.xp6(2),c.Q6J("disabled",e.editPassword.invalid))},directives:[o._Y,o.JL,o.sg,v.KE,v.hX,q.Nt,o.Fj,o.JJ,o.u,_.Hw,v.qo,m.lW,v.R9],styles:[""]}),t})()}]}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(I)],r.Bz]}),t})();var k=i(4886);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.ez,P,o.UX,k.q]]}),t})()}}]);