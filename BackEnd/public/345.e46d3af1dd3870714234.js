(self.webpackChunkfishing_study_app=self.webpackChunkfishing_study_app||[]).push([[345],{1345:(e,o,i)=>{"use strict";i.r(o),i.d(o,{SurveyModule:()=>V});var t=i(1116),n=i(3337),l=i(1041),u=i(2501),r=i.n(u),s=i(5366),d=i(529),a=i(2693),v=i(878),c=i(9996),m=i(7727);let g=(()=>{class e{constructor(e){this.http=e,this._baseUrl=d.N.baseUrl}registrarEncuesta(e){const o=`${this._baseUrl}/survey`,i=(new a.WM).append("x-token",localStorage.getItem("token")||"");return this.http.post(o,e,{headers:i}).pipe((0,c.U)(e=>e.ok),(0,m.K)(e=>(0,v.of)(e.error.msg)))}}return e.\u0275fac=function(o){return new(o||e)(s.LFG(a.eN))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=i(3070),Z=i(9550),f=i(7307),_=i(3841),h=i(7064),b=i(4369),q=i(5592),y=i(2290),A=i(6726);function T(e,o){1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"th"),s._uU(2,"Nombre Comun"),s.qZA(),s.TgZ(3,"th"),s._uU(4,"Nombre Cientifico"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Familia"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Genero"),s.qZA(),s.TgZ(9,"th"),s._uU(10,"Especie"),s.qZA(),s.TgZ(11,"th"),s._uU(12,"Sexo"),s.qZA(),s.TgZ(13,"th"),s._uU(14,"Longitud de Horquilla"),s.qZA(),s.TgZ(15,"th"),s._uU(16,"Peso en Gramos"),s.qZA(),s.TgZ(17,"th"),s._uU(18,"Acciones"),s.qZA(),s.qZA())}function C(e,o){if(1&e){const e=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.TgZ(13,"td"),s._uU(14),s.qZA(),s.TgZ(15,"td"),s._uU(16),s.qZA(),s.TgZ(17,"td"),s.TgZ(18,"button",31),s.NdJ("click",function(){const o=s.CHM(e).rowIndex;return s.oxw(2).editEspecie(o)}),s.qZA(),s.TgZ(19,"button",32),s.NdJ("click",function(){const o=s.CHM(e).rowIndex;return s.oxw(2).eliminar(o)}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=o.$implicit;s.xp6(2),s.Oqu(e.nombreComun),s.xp6(2),s.Oqu(e.nombreCientifico),s.xp6(2),s.Oqu(e.familia),s.xp6(2),s.Oqu(e.genero),s.xp6(2),s.Oqu(e.especie),s.xp6(2),s.Oqu(e.sexo),s.xp6(2),s.Oqu(e.longitudHorquilla),s.xp6(2),s.Oqu(e.pesoGr)}}function U(e,o){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"h5"),s._uU(2,"Especies agregadas:"),s.qZA(),s._UZ(3,"br"),s.TgZ(4,"p-table",28),s.YNc(5,T,19,0,"ng-template",29),s.YNc(6,C,20,8,"ng-template",30),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Q6J("value",e.especies)("autoLayout",!0)("paginator",!0)("rows",10)}}const x=[{path:"",component:(()=>{class e{constructor(e,o){this.fb=e,this.surveyService=o,this.especies=[],this.displayedColumns=["index","nombreComun","nombreCientifico","familia","genero","especie","sexo","longitudHorquilla","pesoGr","action"],this.selected=""}ngOnInit(){this.survey=this.fb.group({comunidad:["",l.kI.required],no_nombreComun:["",l.kI.required],no_nombreCientifico:["",l.kI.required],no_familia:["",l.kI.required],no_genero:["",l.kI.required],no_especie:["",l.kI.required],no_sexo:["",l.kI.required],no_longitudHorquilla:["",l.kI.required],no_pesoGr:["",l.kI.required]})}eliminar(e){r().fire({title:"Borrar record",text:"\xbfEsta seguro que desea eliminar este record?",icon:"question",iconColor:"#3085d6",showCancelButton:!0,confirmButtonColor:"#2F6FC6",cancelButtonColor:"#2F6FC6",confirmButtonText:"Si",cancelButtonText:"No"}).then(o=>{o.isConfirmed&&(this.especies.splice(e,1),r().fire({title:"Eliminado!",text:"Record eliminado correctamente",icon:"success",showConfirmButton:!1,timer:1500}))})}isVisible(){return 0!=this.especies.length}especieValida(){var e,o,i,t,n,l,u,r,s,d,a,v,c,m;return(null===(o=null===(e=this.survey)||void 0===e?void 0:e.get("no_nombreComun"))||void 0===o?void 0:o.valid)&&(null===(t=null===(i=this.survey)||void 0===i?void 0:i.get("no_nombreCientifico"))||void 0===t?void 0:t.valid)&&(null===(l=null===(n=this.survey)||void 0===n?void 0:n.get("no_familia"))||void 0===l?void 0:l.valid)&&(null===(r=null===(u=this.survey)||void 0===u?void 0:u.get("no_genero"))||void 0===r?void 0:r.valid)&&(null===(d=null===(s=this.survey)||void 0===s?void 0:s.get("no_especie"))||void 0===d?void 0:d.valid)&&(null===(v=null===(a=this.survey)||void 0===a?void 0:a.get("no_longitudHorquilla"))||void 0===v?void 0:v.valid)&&(null===(m=null===(c=this.survey)||void 0===c?void 0:c.get("no_pesoGr"))||void 0===m?void 0:m.valid)&&""!=this.selected}clearEspeciesForm(e){var o,i,t,n,l,u,r,s,d,a,v,c,m,g;null===(i=null===(o=this.survey)||void 0===o?void 0:o.get("no_nombreComun"))||void 0===i||i.setValue(""),null===(n=null===(t=this.survey)||void 0===t?void 0:t.get("no_nombreCientifico"))||void 0===n||n.setValue(""),null===(u=null===(l=this.survey)||void 0===l?void 0:l.get("no_familia"))||void 0===u||u.setValue(""),null===(s=null===(r=this.survey)||void 0===r?void 0:r.get("no_genero"))||void 0===s||s.setValue(""),null===(a=null===(d=this.survey)||void 0===d?void 0:d.get("no_especie"))||void 0===a||a.setValue(""),null===(c=null===(v=this.survey)||void 0===v?void 0:v.get("no_longitudHorquilla"))||void 0===c||c.setValue(""),null===(g=null===(m=this.survey)||void 0===m?void 0:m.get("no_pesoGr"))||void 0===g||g.setValue(""),this.selected="",e.resetForm()}addEspecie(e){var o,i,t,n,l,u,r,s,d,a,v,c,m,g,p,Z,f,_,h,b,q,y,A,T,C,U,x,k,I,N,V,w,H,E,M,J,F,G;const B={nombreComun:null===(i=null===(o=this.survey)||void 0===o?void 0:o.get("no_nombreComun"))||void 0===i?void 0:i.value,nombreCientifico:null===(n=null===(t=this.survey)||void 0===t?void 0:t.get("no_nombreCientifico"))||void 0===n?void 0:n.value,familia:null===(u=null===(l=this.survey)||void 0===l?void 0:l.get("no_familia"))||void 0===u?void 0:u.value,genero:null===(s=null===(r=this.survey)||void 0===r?void 0:r.get("no_genero"))||void 0===s?void 0:s.value,especie:null===(a=null===(d=this.survey)||void 0===d?void 0:d.get("no_especie"))||void 0===a?void 0:a.value,sexo:this.selected,longitudHorquilla:null===(c=null===(v=this.survey)||void 0===v?void 0:v.get("no_longitudHorquilla"))||void 0===c?void 0:c.value,pesoGr:null===(g=null===(m=this.survey)||void 0===m?void 0:m.get("no_pesoGr"))||void 0===g?void 0:g.value};this.especies.push(B);const O=null===(Z=null===(p=this.survey)||void 0===p?void 0:p.get("comunidad"))||void 0===Z?void 0:Z.value,S=null===(_=null===(f=this.survey)||void 0===f?void 0:f.get("no_nombreComun"))||void 0===_?void 0:_.value,P=null===(b=null===(h=this.survey)||void 0===h?void 0:h.get("no_nombreCientifico"))||void 0===b?void 0:b.value,L=null===(y=null===(q=this.survey)||void 0===q?void 0:q.get("no_familia"))||void 0===y?void 0:y.value,Y=null===(T=null===(A=this.survey)||void 0===A?void 0:A.get("no_genero"))||void 0===T?void 0:T.value,z=null===(U=null===(C=this.survey)||void 0===C?void 0:C.get("no_especie"))||void 0===U?void 0:U.value;this.selected="",e.reset(),null===(k=null===(x=this.survey)||void 0===x?void 0:x.get("comunidad"))||void 0===k||k.setValue(O),null===(N=null===(I=this.survey)||void 0===I?void 0:I.get("no_nombreComun"))||void 0===N||N.setValue(S),null===(w=null===(V=this.survey)||void 0===V?void 0:V.get("no_nombreCientifico"))||void 0===w||w.setValue(P),null===(E=null===(H=this.survey)||void 0===H?void 0:H.get("no_familia"))||void 0===E||E.setValue(L),null===(J=null===(M=this.survey)||void 0===M?void 0:M.get("no_genero"))||void 0===J||J.setValue(Y),null===(G=null===(F=this.survey)||void 0===F?void 0:F.get("no_especie"))||void 0===G||G.setValue(z)}editEspecie(e){var o,i,t,n,l,u,s,d,a,v,c,m,g,p;const Z=this.especies.splice(e,1);null===(i=null===(o=this.survey)||void 0===o?void 0:o.get("no_nombreComun"))||void 0===i||i.setValue(Z[0].nombreComun),null===(n=null===(t=this.survey)||void 0===t?void 0:t.get("no_nombreCientifico"))||void 0===n||n.setValue(Z[0].nombreCientifico),null===(u=null===(l=this.survey)||void 0===l?void 0:l.get("no_familia"))||void 0===u||u.setValue(Z[0].familia),null===(d=null===(s=this.survey)||void 0===s?void 0:s.get("no_genero"))||void 0===d||d.setValue(Z[0].genero),this.selected=Z[0].sexo,null===(v=null===(a=this.survey)||void 0===a?void 0:a.get("no_especie"))||void 0===v||v.setValue(Z[0].especie),null===(m=null===(c=this.survey)||void 0===c?void 0:c.get("no_longitudHorquilla"))||void 0===m||m.setValue(Z[0].longitudHorquilla),null===(p=null===(g=this.survey)||void 0===g?void 0:g.get("no_pesoGr"))||void 0===p||p.setValue(Z[0].pesoGr),r().fire({icon:"success",title:"Puede editar los datos en el formulario.",showConfirmButton:!0})}send(e){this.surveyService.registrarEncuesta({comunidad:this.survey.value.comunidad,especies:this.especies}).subscribe(o=>{o?r().fire({icon:"success",title:"Encuesta enviada exitosamente.",showConfirmButton:!1,timer:1500}).then(()=>{this.selected="",this.especies=[],e.resetForm(),this.survey.reset()}):r().fire({icon:"warning",title:"Se detecto un error al enviar la encuesta",text:"Verifique los datos ingresados"})})}}return e.\u0275fac=function(o){return new(o||e)(s.Y36(l.qu),s.Y36(g))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-survey"]],decls:68,vars:5,consts:[[1,"back"],[1,"mx-5","mt-3"],[2,"background-color","White","padding","1em"],["autocomplete","off",1,"m-4","mt-4","mb-4",3,"formGroup","ngSubmit"],["formDirective","ngForm"],[1,"row"],[1,"col-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","comunidad"],["matSuffix","",1,"me-2"],[1,"col-12","mt-2","mb-2"],[1,"mb-2"],["appearance","outline",1,"width-100","m-1"],["matInput","","formControlName","no_nombreComun"],["matInput","","formControlName","no_nombreCientifico"],["matInput","","formControlName","no_familia"],["matInput","","formControlName","no_genero"],["matInput","","formControlName","no_especie"],[3,"value","valueChange"],["value","M"],["value","H"],["value","I"],["type","number","matInput","","formControlName","no_longitudHorquilla"],["type","number","matInput","","formControlName","no_pesoGr"],["mat-raised-button","","type","button","color","primary","aria-label","A\xf1adir especie",1,"col-6","m-2",3,"disabled","click"],["mat-raised-button","","type","button","color","warn","aria-label","A\xf1adir especie",1,"col-4","m-2",3,"click"],[4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"col-12","mt-3",3,"disabled"],["styleClass","p-datatable-gridlines",3,"value","autoLayout","paginator","rows"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-pencil","iconPos","left",1,"p-button-rounded","p-button-primary",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(e,o){if(1&e){const e=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h1"),s._uU(3,"Encuestas"),s.qZA(),s._UZ(4,"hr"),s.TgZ(5,"div",2),s.TgZ(6,"form",3,4),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.MAs(7);return o.send(i)}),s.TgZ(8,"div",5),s.TgZ(9,"div",6),s.TgZ(10,"mat-form-field",7),s.TgZ(11,"mat-label"),s._uU(12,"Nombre de la comunidad"),s.qZA(),s._UZ(13,"input",8),s.TgZ(14,"mat-icon",9),s._uU(15,"place"),s.qZA(),s.qZA(),s.qZA(),s._UZ(16,"hr"),s.TgZ(17,"div",10),s.TgZ(18,"h5",11),s._uU(19,"Ingresar Especie:"),s.qZA(),s._uU(20,"\xa0 "),s._UZ(21,"br"),s.TgZ(22,"mat-form-field",12),s.TgZ(23,"mat-label"),s._uU(24,"Nombre Comun"),s.qZA(),s._UZ(25,"input",13),s.qZA(),s.TgZ(26,"mat-form-field",12),s.TgZ(27,"mat-label"),s._uU(28,"Nombre Cientifico"),s.qZA(),s._UZ(29,"input",14),s.qZA(),s.TgZ(30,"mat-form-field",12),s.TgZ(31,"mat-label"),s._uU(32,"Familia"),s.qZA(),s._UZ(33,"input",15),s.qZA(),s.TgZ(34,"mat-form-field",12),s.TgZ(35,"mat-label"),s._uU(36,"Genero"),s.qZA(),s._UZ(37,"input",16),s.qZA(),s.TgZ(38,"mat-form-field",12),s.TgZ(39,"mat-label"),s._uU(40,"Especie"),s.qZA(),s._UZ(41,"input",17),s.qZA(),s.TgZ(42,"mat-form-field",12),s.TgZ(43,"mat-label"),s._uU(44,"Sexo"),s.qZA(),s.TgZ(45,"mat-select",18),s.NdJ("valueChange",function(e){return o.selected=e}),s.TgZ(46,"mat-option",19),s._uU(47,"Macho"),s.qZA(),s.TgZ(48,"mat-option",20),s._uU(49,"Hembra"),s.qZA(),s.TgZ(50,"mat-option",21),s._uU(51,"Indeterminado"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(52,"mat-form-field",12),s.TgZ(53,"mat-label"),s._uU(54,"Longitud de Horquilla"),s.qZA(),s._UZ(55,"input",22),s.qZA(),s.TgZ(56,"mat-form-field",12),s.TgZ(57,"mat-label"),s._uU(58,"Peso (gramos)"),s.qZA(),s._UZ(59,"input",23),s.qZA(),s.TgZ(60,"button",24),s.NdJ("click",function(){s.CHM(e);const i=s.MAs(7);return o.addEspecie(i)}),s._uU(61,"Agregar"),s.qZA(),s.TgZ(62,"button",25),s.NdJ("click",function(){s.CHM(e);const i=s.MAs(7);return o.clearEspeciesForm(i)}),s._uU(63,"Limpiar Formulario"),s.qZA(),s.qZA(),s._UZ(64,"hr"),s.YNc(65,U,7,4,"div",26),s.qZA(),s.TgZ(66,"button",27),s._uU(67,"Enviar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){let e;s.xp6(6),s.Q6J("formGroup",o.survey),s.xp6(39),s.Q6J("value",o.selected),s.xp6(15),s.Q6J("disabled",!o.especieValida()),s.xp6(5),s.Q6J("ngIf",o.isVisible()),s.xp6(1),s.Q6J("disabled",!(null!=o.survey&&null!=(e=o.survey.get("comunidad"))&&e.valid))}},directives:[l._Y,l.JL,l.sg,p.KE,p.hX,Z.Nt,l.Fj,l.JJ,l.u,f.Hw,p.R9,_.gD,h.ey,l.wV,b.lW,t.O5,q.iA,y.jx,A.Hq],styles:[".back[_ngcontent-%COMP%]{position:fixed;top:56px;bottom:0;left:0;right:0;z-index:100;background-image:url(90.ea64f17445f9bd7c9ac7.png);background-position:50%;background-repeat:no-repeat;background-size:cover}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center!important}th[_ngcontent-%COMP%]{color:#fff!important;background-color:#3f51b5!important}.btn[_ngcontent-%COMP%]{margin:1rem;color:#47b1b1}"]}),e})(),pathMatch:"full"}];let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.Bz.forChild(x)],n.Bz]}),e})();var I=i(4886),N=i(5674);let V=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[t.ez,k,I.q,l.UX,N.W]]}),e})()}}]);